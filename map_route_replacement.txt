// ì´ íŒŒì¼ì€ RunningScreen.jsxì˜ ê²½ë¡œ í‘œì‹œ ë¶€ë¶„ì„ êµì²´í•˜ê¸° ìœ„í•œ ì½”ë“œì…ë‹ˆë‹¤.
// 389-427ì¤„ì„ ì•„ë˜ ì½”ë“œë¡œ êµì²´í•˜ì„¸ìš”.

                        {/* ê²½ë¡œ í‘œì‹œ - ì¼ë°˜ êµ¬ê°„ê³¼ ê¸‰ìˆ˜ êµ¬ê°„ ë¶„ë¦¬ */}
                        {route.length > 1 && (() => {
                            const segments = [];
                            let currentSegmentStart = 0;
                            
                            // ëª¨ë“  ê¸‰ìˆ˜ êµ¬ê°„ (ì™„ë£Œëœ ê²ƒ + í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ê²ƒ)
                            const allWateringSegments = [...wateringSegments];
                            if (isWatering && wateringStartIndex !== null) {
                                allWateringSegments.push({
                                    start: wateringStartIndex,
                                    end: route.length
                                });
                            }
                            
                            // ê¸‰ìˆ˜ êµ¬ê°„ì„ ì‹œì‘ ì¸ë±ìŠ¤ë¡œ ì •ë ¬
                            allWateringSegments.sort((a, b) => a.start - b.start);
                            
                            allWateringSegments.forEach((segment, idx) => {
                                // ê¸‰ìˆ˜ êµ¬ê°„ ì´ì „ì˜ ì¼ë°˜ êµ¬ê°„
                                if (currentSegmentStart < segment.start) {
                                    segments.push(
                                        <PolylineF
                                            key={`normal-${idx}`}
                                            path={route.slice(currentSegmentStart, segment.start + 1)}
                                            options={{
                                                strokeColor: "#667eea",
                                                strokeOpacity: 0.8,
                                                strokeWeight: 5,
                                            }}
                                        />
                                    );
                                }
                                
                                // ê¸‰ìˆ˜ êµ¬ê°„
                                if (segment.start < segment.end) {
                                    segments.push(
                                        <PolylineF
                                            key={`water-${idx}`}
                                            path={route.slice(segment.start, segment.end + 1)}
                                            options={{
                                                strokeColor: "#06b6d4",
                                                strokeOpacity: 0.9,
                                                strokeWeight: 6,
                                            }}
                                        />
                                    );
                                }
                                
                                currentSegmentStart = segment.end;
                            });
                            
                            // ë§ˆì§€ë§‰ ì¼ë°˜ êµ¬ê°„
                            if (currentSegmentStart < route.length) {
                                segments.push(
                                    <PolylineF
                                        key="normal-last"
                                        path={route.slice(currentSegmentStart)}
                                        options={{
                                            strokeColor: "#667eea",
                                            strokeOpacity: 0.8,
                                            strokeWeight: 5,
                                        }}
                                    />
                                );
                            }
                            
                            return segments;
                        })()}

                        {/* ê¸‰ìˆ˜ ì‹œì‘ì  ë§ˆì»¤ë“¤ */}
                        {wateringSegments.map((segment, idx) => (
                            segment.start < route.length && (
                                <MarkerF
                                    key={`water-start-${idx}`}
                                    position={route[segment.start]}
                                    icon={{
                                        path: google.maps.SymbolPath.CIRCLE,
                                        scale: 7,
                                        fillColor: "#06b6d4",
                                        fillOpacity: 1,
                                        strokeColor: "#ffffff",
                                        strokeWeight: 3,
                                    }}
                                    label={{
                                        text: "ğŸ’§",
                                        fontSize: "16px",
                                        color: "transparent"
                                    }}
                                />
                            )
                        ))}
                        
                        {/* í˜„ì¬ ê¸‰ìˆ˜ ì¤‘ì¸ ì‹œì‘ì  */}
                        {isWatering && wateringStartIndex !== null && wateringStartIndex < route.length && (
                            <MarkerF
                                position={route[wateringStartIndex]}
                                icon={{
                                    path: google.maps.SymbolPath.CIRCLE,
                                    scale: 8,
                                    fillColor: "#06b6d4",
                                    fillOpacity: 1,
                                    strokeColor: "#ffffff",
                                    strokeWeight: 3,
                                }}
                                label={{
                                    text: "ğŸ’§",
                                    fontSize: "18px",
                                    color: "transparent"
                                }}
                            />
                        )}

                        {/* ì‹œì‘ì  */}
                        {route.length > 0 && (
                            <MarkerF
                                position={route[0]}
                                icon={{
                                    path: google.maps.SymbolPath.CIRCLE,
                                    scale: 5,
                                    fillColor: "#22c55e",
                                    fillOpacity: 1,
                                    strokeColor: "#ffffff",
                                    strokeWeight: 3,
                                }}
                            />
                        )}

                        {/* í˜„ì¬ ìœ„ì¹˜ */}
                        <MarkerF
                            position={currentPosition}
                            icon={{
                                path: google.maps.SymbolPath.CIRCLE,
                                scale: 8,
                                fillColor: "#667eea",
                                fillOpacity: 1,
                                strokeColor: "#ffffff",
                                strokeWeight: 3,
                            }}
                        />
